{{> layout_start_document}}
<link rel="stylesheet" href="/public/css/tagcloud.css">
<script src="/bower/jquery/dist/jquery.min.js"></script>
<script src="/bower/d3/d3.js"></script>
<script src="/bower/d3-cloud/build/d3.layout.cloud.js"></script>
<script>
  window.tags = {{{tagJson}}};

  // Convert object to array of objects.
  window.processedTags = Object.keys(window.tags).map(function(tagName) {
    return {
      text: tagName,
      size: window.tags[tagName].count,
      count: window.tags[tagName].count,
      urlEncodedName: window.tags[tagName].urlEncodedName
    }
  });

  var tagCounts = window.processedTags.map(function (tag) { return tag.size });
  window.minTagCount = Math.min.apply(null, tagCounts);
  window.maxTagCount = Math.max.apply(null, tagCounts);
</script>
<script src="/public/javascript/tagcloud.js"></script>
{{> layout_start_body}}
<main>
  <header>
    <h1 class="project-name">{{project.repoName}} Tag Cloud</h1>
  </header>
  {{#if project}}
    <section class="project">
      <section class="summary">
        <p>There are {{numTags}} unique tags in the project</p>
      </section>
      <section class="world-cloud-container">
        <svg id="word-cloud"></svg>
      </section>
    </section>
  {{else}}
    <p>Sorry, no project data was found</p>
  {{/if}}
</main>
{{> layout_end}}
